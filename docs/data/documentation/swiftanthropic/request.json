{"variants":[{"paths":["\/documentation\/swiftanthropic\/request"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic"]]},"identifier":{"url":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request","interfaceLanguage":"swift"},"kind":"symbol","abstract":[{"text":"A struct to configure a request to an Anthropic model.","type":"text"}],"topicSections":[{"generated":true,"identifiers":["doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request\/init(model:messages:maxTokens:metadata:stopSequences:stream:system:temperature:topK:topP:)"],"title":"Initializers","anchor":"Initializers"},{"title":"Instance Methods","anchor":"Instance-Methods","generated":true,"identifiers":["doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request\/encode(to:)"]}],"sections":[],"relationshipsSections":[{"kind":"relationships","identifiers":["doc:\/\/SwiftAnthropic\/SE"],"title":"Conforms To","type":"conformsTo"}],"metadata":{"role":"symbol","roleHeading":"Structure","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"Request","kind":"identifier"}],"externalID":"s:14SwiftAnthropic7RequestV","title":"Request","navigatorTitle":[{"text":"Request","kind":"identifier"}],"modules":[{"name":"SwiftAnthropic"}],"symbolKind":"struct"},"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"Request","kind":"identifier"}],"platforms":["macOS"]}],"kind":"declarations"},{"content":[{"text":"Overview","anchor":"overview","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"code":"Request","type":"codeVoice"},{"type":"text","text":" exposes all configuration options offered by Anthropic for their "},{"isActive":true,"type":"reference","identifier":"https:\/\/docs.anthropic.com\/en\/api\/messages"},{"type":"text","text":"."}]},{"type":"heading","anchor":"Configuration-Options","level":2,"text":"Configuration Options"},{"type":"heading","text":"model","level":4,"anchor":"model"},{"type":"paragraph","inlineContent":[{"text":"The model that will complete your prompt. See ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/docs.anthropic.com\/en\/docs\/models-overview"},{"type":"text","text":" for additional details and options."}]},{"text":"messages","level":4,"type":"heading","anchor":"messages"},{"inlineContent":[{"text":"Input messages.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Anthropic’s models are trained to operate on alternating "},{"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Role\/user","type":"reference","isActive":true},{"text":" and ","type":"text"},{"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Role\/assistant","isActive":true,"type":"reference"},{"type":"text","text":" conversational turns. When generating a response,"},{"type":"text","text":" "},{"type":"text","text":"you specify the prior conversational turns with the "},{"type":"codeVoice","code":"messages"},{"type":"text","text":" parameter, and the model then generates the next message in the conversation."}]},{"type":"paragraph","inlineContent":[{"text":"You can specify a single user-role message, or you can include multiple user and assistant messages. The first message must always use the user role.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If the final message uses the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Role\/assistant"},{"type":"text","text":" role, the response content will continue immediately from the content in that message. This can be used to constrain part of the model’s response."}]},{"code":["let response = anthropic.sendRequest(","    messages: [","        Message(\"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\", role: .user)","        Message(\"The best answer is (\", role: .assistant)","    ]",")","","\/\/ B)","print(response.content)"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"Note that if you want to include a system prompt, you can use the system parameter — there is no “system” role for input messages."}],"type":"paragraph"},{"anchor":"maxTokens","level":4,"type":"heading","text":"maxTokens"},{"type":"paragraph","inlineContent":[{"text":"The maximum number of tokens to generate before stopping.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Note that Anthropic’s models may stop before reaching this maximum. This parameter only specifies the absolute maximum number of tokens to generate.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Different models have different maximum values for this parameter. See ","type":"text"},{"overridingTitleInlineContent":[{"text":"Anthropic’s docs","type":"text"}],"isActive":true,"identifier":"https:\/\/docs.anthropic.com\/en\/docs\/models-overview","type":"reference","overridingTitle":"Anthropic’s docs"},{"type":"text","text":" for details."}]},{"level":4,"type":"heading","text":"metadata","anchor":"metadata"},{"type":"paragraph","inlineContent":[{"text":"An object describing metadata about the request. Anthropic may use the ID in this object to help detect abuse.","type":"text"}]},{"type":"heading","anchor":"stopSequences","level":4,"text":"stopSequences"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Custom text sequences that will cause the model to stop generating."}]},{"inlineContent":[{"text":"Anthropic’s models will normally stop when they have naturally completed their turn, which will result in a response stopReason of ","type":"text"},{"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Response\/StopReason-swift.enum\/endTurn","type":"reference","isActive":true},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"If you want the model to stop generating when it encounters custom strings of text, you can use the stopSequences parameter.","type":"text"},{"type":"text","text":" "},{"text":"If the model encounters one of the custom sequences, the response stopReason value will be ","type":"text"},{"type":"reference","identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Response\/StopReason-swift.enum\/stopSequence(_:)","isActive":true},{"text":", containing the matched stop sequence.","type":"text"}]},{"type":"heading","text":"stream","anchor":"stream","level":4},{"inlineContent":[{"text":"Streams are not yet supported.","type":"text"}],"type":"paragraph"},{"level":4,"anchor":"system","type":"heading","text":"system"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A system prompt is a way of providing context and instructions to Claude, such as specifying a particular goal or role."},{"type":"text","text":" "},{"text":"See ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/docs.anthropic.com\/en\/docs\/system-prompts"},{"text":" to system prompts.","type":"text"}]},{"type":"heading","level":4,"text":"temperature","anchor":"temperature"},{"type":"paragraph","inlineContent":[{"text":"Amount of randomness injected into the response. Ranges from ","type":"text"},{"type":"codeVoice","code":"0.0"},{"type":"text","text":" to "},{"code":"1.0","type":"codeVoice"},{"type":"text","text":"."},{"type":"text","text":" "},{"text":"Use temperature closer to ","type":"text"},{"code":"0.0","type":"codeVoice"},{"type":"text","text":" for analytical \/ multiple choice, and closer to "},{"type":"codeVoice","code":"1.0"},{"text":" for creative and generative tasks.","type":"text"}]},{"inlineContent":[{"type":"text","text":"Note that even with temperature of "},{"type":"codeVoice","code":"0.0"},{"text":", the results will not be fully deterministic.","type":"text"}],"type":"paragraph"},{"level":4,"text":"tool_choice and tools","anchor":"toolchoice-and-tools","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Tools are not yet supported."}]},{"text":"topK","type":"heading","anchor":"topK","level":4},{"type":"paragraph","inlineContent":[{"text":"Only sample from the top K options for each subsequent token. Used to remove “long tail” low probability responses. ","type":"text"},{"type":"reference","identifier":"https:\/\/towardsdatascience.com\/how-to-sample-from-language-models-682bceb97277","isActive":true}]},{"type":"paragraph","inlineContent":[{"text":"Recommended for advanced use cases only. You usually only need to use ","type":"text"},{"type":"codeVoice","code":"temperature"},{"type":"text","text":"."}]},{"text":"topP","anchor":"topP","level":4,"type":"heading"},{"inlineContent":[{"type":"text","text":"Use nucleus sampling. In nucleus sampling, Anthropic computes the cumulative distribution over all the options for each subsequent token"},{"text":" ","type":"text"},{"type":"text","text":"in decreasing probability order and cut it off once it reaches a particular probability specified by top_p."},{"type":"text","text":" "},{"type":"text","text":"You should either alter "},{"code":"temperature","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"top_p","type":"codeVoice"},{"text":", but not both.","type":"text"}],"type":"paragraph"}],"kind":"content"}],"references":{"doc://SwiftAnthropic/documentation/SwiftAnthropic/Request/encode(to:)":{"fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"encode"},{"kind":"text","text":"("},{"text":"to","kind":"externalParam"},{"kind":"text","text":": any "},{"text":"Encoder","kind":"typeIdentifier","preciseIdentifier":"s:s7EncoderP"},{"text":") ","kind":"text"},{"text":"throws","kind":"keyword"}],"kind":"symbol","url":"\/documentation\/swiftanthropic\/request\/encode(to:)","role":"symbol","type":"topic","title":"encode(to:)","abstract":[],"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request\/encode(to:)"},"doc://SwiftAnthropic/SE":{"identifier":"doc:\/\/SwiftAnthropic\/SE","type":"unresolvable","title":"Swift.Encodable"},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Request/init(model:messages:maxTokens:metadata:stopSequences:stream:system:temperature:topK:topP:)":{"role":"symbol","url":"\/documentation\/swiftanthropic\/request\/init(model:messages:maxtokens:metadata:stopsequences:stream:system:temperature:topk:topp:)","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"model","kind":"externalParam"},{"kind":"text","text":": "},{"text":"Model","kind":"typeIdentifier","preciseIdentifier":"s:14SwiftAnthropic5ModelO"},{"kind":"text","text":", "},{"text":"messages","kind":"externalParam"},{"kind":"text","text":": [any "},{"kind":"typeIdentifier","text":"ContentfulMessage","preciseIdentifier":"s:14SwiftAnthropic17ContentfulMessageP"},{"text":"], ","kind":"text"},{"text":"maxTokens","kind":"externalParam"},{"kind":"text","text":": "},{"text":"Int","preciseIdentifier":"s:Si","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"metadata"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:14SwiftAnthropic8MetadataV","text":"Metadata"},{"text":"?, ","kind":"text"},{"kind":"externalParam","text":"stopSequences"},{"text":": [","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"stream"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"kind":"text","text":", "},{"text":"system","kind":"externalParam"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"text":"temperature","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Double","kind":"typeIdentifier","preciseIdentifier":"s:Sd"},{"kind":"text","text":", "},{"kind":"externalParam","text":"topK"},{"text":": ","kind":"text"},{"text":"Int","kind":"typeIdentifier","preciseIdentifier":"s:Si"},{"kind":"text","text":"?, "},{"text":"topP","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Int","preciseIdentifier":"s:Si","kind":"typeIdentifier"},{"text":"?)","kind":"text"}],"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request\/init(model:messages:maxTokens:metadata:stopSequences:stream:system:temperature:topK:topP:)","title":"init(model:messages:maxTokens:metadata:stopSequences:stream:system:temperature:topK:topP:)","abstract":[{"type":"text","text":"Create a Request object."}],"kind":"symbol","type":"topic"},"https://docs.anthropic.com/en/api/messages":{"url":"https:\/\/docs.anthropic.com\/en\/api\/messages","titleInlineContent":[{"text":"Message API","type":"text"}],"identifier":"https:\/\/docs.anthropic.com\/en\/api\/messages","type":"link","title":"Message API"},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Role/user":{"abstract":[{"type":"text","text":"The user sent the message."}],"title":"Role.user","fragments":[{"text":"case","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"user"}],"type":"topic","kind":"symbol","url":"\/documentation\/swiftanthropic\/role\/user","identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Role\/user","role":"symbol"},"https://docs.anthropic.com/en/docs/models-overview":{"url":"https:\/\/docs.anthropic.com\/en\/docs\/models-overview","titleInlineContent":[{"text":"models","type":"text"}],"type":"link","identifier":"https:\/\/docs.anthropic.com\/en\/docs\/models-overview","title":"models"},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Request":{"abstract":[{"type":"text","text":"A struct to configure a request to an Anthropic model."}],"url":"\/documentation\/swiftanthropic\/request","role":"symbol","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Request","kind":"identifier"}],"navigatorTitle":[{"text":"Request","kind":"identifier"}],"kind":"symbol","identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Request","title":"Request"},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Response/StopReason-swift.enum/stopSequence(_:)":{"url":"\/documentation\/swiftanthropic\/response\/stopreason-swift.enum\/stopsequence(_:)","type":"topic","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"One of the provided custom stopSequences was generated."}],"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Response\/StopReason-swift.enum\/stopSequence(_:)","title":"Response.StopReason.stopSequence(_:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"text":"stopSequence","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":")","kind":"text"}]},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Response/StopReason-swift.enum/endTurn":{"url":"\/documentation\/swiftanthropic\/response\/stopreason-swift.enum\/endturn","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"text":"endTurn","kind":"identifier"}],"abstract":[{"text":"The model reached a natural stopping point.","type":"text"}],"type":"topic","kind":"symbol","identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Response\/StopReason-swift.enum\/endTurn","title":"Response.StopReason.endTurn","role":"symbol"},"https://docs.anthropic.com/en/docs/system-prompts":{"url":"https:\/\/docs.anthropic.com\/en\/docs\/system-prompts","titleInlineContent":[{"text":"Anthropic’s guide","type":"text"}],"identifier":"https:\/\/docs.anthropic.com\/en\/docs\/system-prompts","type":"link","title":"Anthropic’s guide"},"doc://SwiftAnthropic/documentation/SwiftAnthropic":{"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic","kind":"symbol","abstract":[],"title":"SwiftAnthropic","url":"\/documentation\/swiftanthropic","role":"collection","type":"topic"},"https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277":{"url":"https:\/\/towardsdatascience.com\/how-to-sample-from-language-models-682bceb97277","titleInlineContent":[{"text":"Learn more technical details here.","type":"text"}],"identifier":"https:\/\/towardsdatascience.com\/how-to-sample-from-language-models-682bceb97277","type":"link","title":"Learn more technical details here."},"doc://SwiftAnthropic/documentation/SwiftAnthropic/Role/assistant":{"identifier":"doc:\/\/SwiftAnthropic\/documentation\/SwiftAnthropic\/Role\/assistant","url":"\/documentation\/swiftanthropic\/role\/assistant","role":"symbol","type":"topic","kind":"symbol","abstract":[{"text":"The assistant sent the message.","type":"text"}],"title":"Role.assistant","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"text":"assistant","kind":"identifier"}]}}}